{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ravit\\\\Documents\\\\flask react practice\\\\admin\\\\src\\\\Components\\\\Logout.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Logout = () => {\n  _s();\n  const [show, setShow] = useState(false);\n  const history = useHistory();\n\n  // Define adminLogout using useCallback\n  const adminLogout = useCallback(async () => {\n    const token = localStorage.getItem('token');\n    try {\n      const res = await fetch('/logoutAdmin', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          auth: token\n        })\n      });\n      const data = await res.json();\n      if (res.status === 201) {\n        setShow(true);\n        localStorage.removeItem('token');\n        window.alert('Successfully Logout');\n        history.push('/login', {\n          replace: true\n        });\n        window.location.reload();\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }, [history]);\n  useEffect(() => {\n    const confirmBox = window.confirm('Do you really want to Logout?');\n    if (confirmBox === true) {\n      adminLogout();\n      localStorage.removeItem('token');\n      history.push('/login', {\n        replace: true\n      });\n    } else {\n      history.push('/');\n    }\n\n    // Cleanup function to prevent memory leaks\n    return () => {\n      // Perform cleanup tasks here if needed\n    };\n  }, [adminLogout, history]); // Add missing dependencies to the dependency array\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: show ? 'Logout Successfully!' : 'Processing...'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n_s(Logout, \"5Cl/KoLRiMcZfhzZNWalPk9NN5E=\", false, function () {\n  return [useHistory];\n});\n_c = Logout;\nexport default Logout;\nvar _c;\n$RefreshReg$(_c, \"Logout\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","useHistory","jsxDEV","_jsxDEV","Logout","_s","show","setShow","history","adminLogout","token","localStorage","getItem","res","fetch","method","headers","body","JSON","stringify","auth","data","json","status","removeItem","window","alert","push","replace","location","reload","error","console","log","confirmBox","confirm","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/ravit/Documents/flask react practice/admin/src/Components/Logout.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst Logout = () => {\r\n  const [show, setShow] = useState(false);\r\n  const history = useHistory();\r\n\r\n  // Define adminLogout using useCallback\r\n  const adminLogout = useCallback(async () => {\r\n    const token = localStorage.getItem('token');\r\n    try {\r\n      const res = await fetch('/logoutAdmin', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          auth: token,\r\n        }),\r\n      });\r\n\r\n      const data = await res.json();\r\n      if (res.status === 201) {\r\n        setShow(true);\r\n        localStorage.removeItem('token');\r\n        window.alert('Successfully Logout');\r\n        history.push('/login', { replace: true });\r\n        window.location.reload();\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }, [history]);\r\n\r\n  useEffect(() => {\r\n    const confirmBox = window.confirm('Do you really want to Logout?');\r\n    if (confirmBox === true) {\r\n      adminLogout();\r\n      localStorage.removeItem('token');\r\n      history.push('/login', { replace: true });\r\n    } else {\r\n      history.push('/');\r\n    }\r\n\r\n    // Cleanup function to prevent memory leaks\r\n    return () => {\r\n      // Perform cleanup tasks here if needed\r\n    };\r\n  }, [adminLogout, history]); // Add missing dependencies to the dependency array\r\n\r\n  return (\r\n    <div>\r\n      <h1>{show ? 'Logout Successfully!' : 'Processing...'}</h1>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Logout;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AAC/D,SAASC,UAAU,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9C,MAAMC,MAAM,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGR,QAAQ,CAAC,KAAK,CAAC;EACvC,MAAMS,OAAO,GAAGP,UAAU,CAAC,CAAC;;EAE5B;EACA,MAAMQ,WAAW,GAAGT,WAAW,CAAC,YAAY;IAC1C,MAAMU,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAI;MACF,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,cAAc,EAAE;QACtCC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACnBC,IAAI,EAAEV;QACR,CAAC;MACH,CAAC,CAAC;MAEF,MAAMW,IAAI,GAAG,MAAMR,GAAG,CAACS,IAAI,CAAC,CAAC;MAC7B,IAAIT,GAAG,CAACU,MAAM,KAAK,GAAG,EAAE;QACtBhB,OAAO,CAAC,IAAI,CAAC;QACbI,YAAY,CAACa,UAAU,CAAC,OAAO,CAAC;QAChCC,MAAM,CAACC,KAAK,CAAC,qBAAqB,CAAC;QACnClB,OAAO,CAACmB,IAAI,CAAC,QAAQ,EAAE;UAAEC,OAAO,EAAE;QAAK,CAAC,CAAC;QACzCH,MAAM,CAACI,QAAQ,CAACC,MAAM,CAAC,CAAC;MAC1B;IACF,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACpB;EACF,CAAC,EAAE,CAACvB,OAAO,CAAC,CAAC;EAEbV,SAAS,CAAC,MAAM;IACd,MAAMoC,UAAU,GAAGT,MAAM,CAACU,OAAO,CAAC,+BAA+B,CAAC;IAClE,IAAID,UAAU,KAAK,IAAI,EAAE;MACvBzB,WAAW,CAAC,CAAC;MACbE,YAAY,CAACa,UAAU,CAAC,OAAO,CAAC;MAChChB,OAAO,CAACmB,IAAI,CAAC,QAAQ,EAAE;QAAEC,OAAO,EAAE;MAAK,CAAC,CAAC;IAC3C,CAAC,MAAM;MACLpB,OAAO,CAACmB,IAAI,CAAC,GAAG,CAAC;IACnB;;IAEA;IACA,OAAO,MAAM;MACX;IAAA,CACD;EACH,CAAC,EAAE,CAAClB,WAAW,EAAED,OAAO,CAAC,CAAC,CAAC,CAAC;;EAE5B,oBACEL,OAAA;IAAAiC,QAAA,eACEjC,OAAA;MAAAiC,QAAA,EAAK9B,IAAI,GAAG,sBAAsB,GAAG;IAAe;MAAA+B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACvD,CAAC;AAEV,CAAC;AAACnC,EAAA,CApDID,MAAM;EAAA,QAEMH,UAAU;AAAA;AAAAwC,EAAA,GAFtBrC,MAAM;AAsDZ,eAAeA,MAAM;AAAC,IAAAqC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}